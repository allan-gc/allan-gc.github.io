<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Allan Garcia-Casal - A.R.M </title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="icon" href="data:;base64,iVBORw0KGgo=">
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo">Allan Garcia-Casal</a>
						<h4> Northwestern University | MS in Robotics</h4>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
							<li><a href="index.html">Projects</a></li>
							<li><a href="Resume.html">Resume</a></li>
							<li><a href="About.html">About Me</a></li>
						</ul>
						<ul class="icons">
							<li><a href="https://www.linkedin.com/in/allan-garcia-casal/" class="icon brands fa-linkedin"><span class="label">Linkedin</span></a></li>
							<li><a href="https://github.com/allan-gc" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
							<li><a href="mailto:allang@u.northwestern.edu" class="icon solid fa-envelope" ><span class="label">Email</span></a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<section class="post">
								<header class="major">
									<h1>A.R.M - Assitive Robotic Manipulator <br />
									</h1>
								</header>
                                <span class="image fit2"><img src="assets/Adroit/adroit2.gif" alt="" /></span>

								<!-- Text stuff -->
									<!-- <h2>Text</h2>
									<p>This is <b>bold</b> and this is <strong>strong</strong>. This is <i>italic</i> and this is <em>emphasized</em>.
									This is <sup>superscript</sup> text and this is <sub>subscript</sub> text.
									This is <u>underlined</u> and this is code: <code>for (;;) { ... }</code>.
									Finally, this is a <a href="#">link</a>.</p> -->


									
									<h2>Overview</h2>
									<p style="text-indent: 50px;">
								
									 

									 	For this project, an Adroit Robotic Arm was used as a teleoperated robotic helper. A Thalmic Labs Myo Armband was used as the controller for the Adroit arm. The armband would go around the user's forearm and read the muscle activity in the form of EMG signals.
										These signals were then passed through a gesture classification machine learning model which would map the inputted EMG signals to a specified gesture, such as a fist. These gestures were used to control the end effector of the Adroit.
										To make the user have more control of the Adroit's movements, the gyroscope measurements from the IMU of the armband were used to control the position of other Adroit joints. This combination of EMG and IMU inputs gives almost full control of the Adroit arm, and it allowed for the completion
										of simple tasks with relative ease for the user. 
										

									
									 <br/>
									 <br/>

									 Here is a video showcasing the basic functionality of the system, including the completion of some more difficult tasks. The video labels the sections that are sped up.

									</p>

									<span class="video fit2"><video width="800" height="600" controls  muted src="assets/Adroit/FINAL_VID2_FINAL.mp4" type="video/mp4"></span>
									<br/>
									<br/>

        

									<h2> Gesture Recognition Machine Learning Model</h2>

									<p style="text-indent: 50px;">

										The machine learning model used for this project was developed by Robert Schloen using PyTorch, so I will link to his project page <a href="https://rschloen.github.io/portfolio/2020/01/10/semg-control.html">here</a> for more details.
										
										 The model was trained on data from the <a href="http://ninaweb.hevs.ch/">Ninapro Database 5,</a>  which collected thousands of EMG samples using the same Myo Armbands that Robert and I used. The dataset contains data for many different gestures, 
										 including flexion of each finger, different wrist movements, and different grasps. I ultimately chose to use the same gestures that Robert chose to train on, which included the flexion of the five fingers and a closed fist. This was primarily 
										 because the model was not as accurate when trying to classify different grasp and wrists. Below is a video showing the real time classification of these gestures using the Myo Armband in a Python ROS node. 


										 <span class="video fit2"><video width="800" height="600" controls loop src="assets/Adroit/REALTIME_NODE.webm" type="video/mp4"></span>

										<br/>
										<br/>

										Here is a video of using these gestures with the Adroit. While I trained 7 gestures, I really only ever use 5: Rest or Open Hand, Fist, Pinky, Ring and Middle. As the video shows, I map the 
										"Fist" gesture to be a small end effector grip and the "Pinky" to be a larger grasp,  "Ring" is used as a recallibration flag, and "Middle"  was used to extend a joint not on the gripper.  

										<span class="video fit2"><video width="800" height="600" controls  src="assets/Adroit/Adroit_gestures.mp4" type="video/mp4"></span>
									
									</p>
									
									<h2> IMU Control using the Myo</h2>

									<p style="text-indent: 50px;">


										The Myo Armband comes equipped with a nine degreee of freedom IMU. I chose to use the gyroscope data to control the position of certain Adroit Joints. Below is a photo of the Adroit with 
										the labeled joints that were used, as well as a schematic of the Myo. To control Joint 1, I use the gyroscope data of the z-axis, to control Joint 3, I use the y-axis, and to control Joint 4 I use the x-axis. This
										corresponds to the gyroscope changes that occur when the Myo is on the forearm. Trying to control position of joints using gyroscope proved difficult since 
										the gyroscope measurements began to drift over time, and because the orientation of the Myo would change slighly as it was on the forearm. This was the main
										reason to add the recallibration gesture, which stops all control to the Adroit and allows the user to simply realign themselves with the arm and continue
										using it. The video showcases this functionality.
										<br/>
										<br/>

										<span class="image right"><img src="assets/Adroit/Adroit_schematic.png" alt="" width="200" height="600" /></span>

										<!-- <br/>
										<br/> -->
										<span class="image left"><img src="assets/Adroit/Myo.png" alt="" width="600" height="450" /></span>

										<br/>
										<br/>
										<br/>
										<br/>
										<br/>
										<br/>
										<br/>
										<br/>
										<br/>
										<br/>
										<br/>
										<br/>
										<br/>

										Trying to control position of joints using gyroscope proved difficult since 
										the gyroscope measurements began to drift over time, and because the orientation of the Myo would change slighly as it was on the forearm. This was the main
										reason to add the recallibration gesture, which stops all control to the Adroit and allows the user to simply realign themselves with the arm and continue
										using it. The video below showcases general control of the Adroit using the IMU as well as the recallibration functionality. 
										<span class="video fit2"><video width="800" height="600" controls  src="assets/Adroit/Adroit_position_text_comp.mp4" type="video/mp4"></span>


									</p>
									<p>

								
									

<!-- 	
									<p>
									The API also includes custom ROS2 messages and services that I created to make certain MoveIt service request messages easier to populate, and for calling
									the actions and services without the need for the terminal. 

				
									</p> -->


									<h2>ROS Interface</h2>
									<p style="text-indent: 50px;"></p>
									
									The Adroit was controlled using ROS 1 Noetic from within a Docker container. The Adroit already had the capabilty of being controlled via an Xbox controller using 
									nodes from previously built packages. To control it with the Myo, I mapped the Xbox buttons and joystick commands to certain Myo gestures or IMU measurements. For example, 
									moving the left joystick to the left would send a command to Joint 1 to move, and so I made it such that the gyroscope readings in the z-axis would act as the left joystick control 
									for left and right movements. Below is a schematic of the ROS nodes and how they interact and interface the Myo with the Adroit. The blue nodes are the new ones corresponding to
									gesture prediction and IMU control, while the grey are the existing nodes that lay the foundation for interfacing and controlling thr Adroit with an Xbox controller. The Adroit gesture control 
									node would all Myo data, meaning a predicted gesture and IMU stream. It would then act as a game controller by publishing joystick commands to the estabilished joystick node. The joystick node and the main Adroit 
									control node would then send joint commands to the Adroit and recieve back information on the joint positions. 

									<br/>
									<br/>

									<span class="image fit2"><img src="assets/Adroit/Flowchart2.jpg" alt="" width="500" height="450" /></span>



									<h2>Future Considerations</h2>

									<p>
										While this project was successful in allowing for the control of the Adroit, the IMU control required the recallibration gesture due to its eventual inaccuracy. The pose estimation 
										problem that comes with trying to use IMUs to detect the position of an object, in this case the Myo on the forearm, could definitely be looked into more in order to make the control 
										more robust. 

									</p>

									<p>
										
									</p>

									<p><a href="https://github.com/allan-gc/EMG_Teleoperation"  class="logo"> View Project on Github</a></p>	
								



							

							</section>

					</div>

               

				<!-- Copyright -->
					<div id="copyright">
						<ul><li>&copy; Allan Garcia-Casal </li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
					</div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
