<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Allan Garcia-Casal - BotChocolate </title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo">Allan Garcia-Casal</a>
						<h4> Northwestern University | MS in Robotics</h4>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
							<li><a href="index.html">Projects</a></li>
							<li><a href="Resume.html">Resume</a></li>
							<li><a href="About.html">About Me</a></li>
						</ul>
						<ul class="icons">
							<li><a href="https://www.linkedin.com/in/allan-garcia-casal/" class="icon brands fa-linkedin"><span class="label">Linkedin</span></a></li>
							<li><a href="https://github.com/allan-gc" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
							<li><a href="mailto:allang@u.northwestern.edu" class="icon solid fa-envelope" ><span class="label">Email</span></a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<section class="post">
								<header class="major">
									<h1>Bot Chocolate - Robotic Hot Chocolate Maker<br />
									</h1>
								</header>
                                <span class="image fit2"><img src="assets/BotChocolate/BotChocolate1.gif" alt="" /></span>

								<!-- Text stuff -->
									<!-- <h2>Text</h2>
									<p>This is <b>bold</b> and this is <strong>strong</strong>. This is <i>italic</i> and this is <em>emphasized</em>.
									This is <sup>superscript</sup> text and this is <sub>subscript</sub> text.
									This is <u>underlined</u> and this is code: <code>for (;;) { ... }</code>.
									Finally, this is a <a href="#">link</a>.</p> -->


									
									<h2>Overview</h2>
									<p>
										
									 This project was completed with group members James Oubre, 
									 Shantao Cao, David Dorf, and Nick Marks as part of the Embedded Systems in Robotics class at Northwestern University. 

									 <br/>
									 <br/>

									 For this project, a Franka Emika Panda robotic arm was used to autonomously make hot chocolate. To perceive the environment, the system utilizes an Intel D435i camera and AprilTags. Upon initial setup, a calibration process must be completed to intialize the robot's 
									 end-effector frame to the other object frames in the scene. After this, the process consisted of using AprilTags to locate a scoop of cocoa, a mug, a spoon, and a kettle 
									 relative to the robot. Next, using our custom MoveIt API for Python called 'movebot', the robot is able to perform path planning between all of these objects. It turns on the kettle, dumps 
									 the cocoa powder into the mug, pours the hot water over the power, and stirs the mixture with a popsticle stick or spoon. 

									 <br/>
									 <br/>

									 <!-- <b> Making Hot Chocolate (1.5x Speed)</b> -->

									 Here is the Franka arm following the entire motion plan (at 1.5x speed):

									</p>

									<!-- <span class="video fit2"><video width="800" height="450" controls autoplay muted loop src="assets/BotChocolate/BotChocLQ.mp4" type="video/mp4"></span> -->
									<span class="video fit2"><video width="800" height="450" controls loop src="assets/BotChocolate/BotChocolateSpedUp.mp4" type="video/mp4"></span>

        

									<h2>MoveIt and ROS2 API</h2>

									<p>

									 My main role in this project was to integrate the MoveIt robot manipulation package and ROS2 Humble into a Python API for motion and path planning. The MoveIt package includes 
									 many actions and services for motion planning and robot control. The API itself was created as a ROS2 node that contains the corresponding action
									 and service clients. By doing so, the API can interact with the robot through the MoveIt actions and services.
								


									</p>
									
									<p>

									The biggest hurdle in integrating the MoveIt package into a ROS2 node was getting the action and service requests to be sent correctly such that a proper
									response was generated. As a result, a large part of the API involves helper functions that fill in the request or goal messages that are sent to the 
									action and service clients. The general workflow of the motion planning API is as follows:
									</p>

									<p>
										<span class="image fit2"><img src="assets/BotChocolate/flowc.jpg" alt="" width="1200" height="130" /></span>
									</p>
									

	
									<p>
									The API also includes custom ROS2 messages and services that I created to make certain MoveIt service request messages easier to populate, and for calling
									the actions and services without the need for the terminal. 

				
									</p>


									<h2>Using the API</h2>
									<p> 
									
									Since there is much happening in the backend with 
									all the action and service calls, one of the custom services and messages was created explcitly to make user input as simple as possible. This service allows 		
									the user to generate motion plans by inputting start and goal poses in either Cartesian coordinates or joint angles. It also allows the user to choose whether 
									they would want to 'plan' or 'plan and execute' their trajectory. 

									</p>

									<p>
										For this project, we created another node that contained the entire motion plan for the Franka to make hot chocolate. This node used the 
										movebot Python API services to interact with Moveit and the Franka arm, and it functioned as the main hub for all the motion plan
										testing. After the entire motion plan was assembled and tested seperately, I created a service that would signal the Franka arm to begin moving
										according to the motion plan. 

									</p>

									<p>
										With our API, the Franka arm was able to successfully make cups of hot chocolate autonomously. Once it finished creating one cup, it was able
										serve up another one with no issue or need for restarting any nodes or programs.
										
									</p>

									<p><a href="https://github.com/allan-gc/Bot-Chocolate-ROS2"  class="logo"> View Project on Github</a></p>	
								



							

							</section>

					</div>

               

				<!-- Copyright -->
					<div id="copyright">
						<ul><li>&copy; Allan Garcia-Casal </li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
					</div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
